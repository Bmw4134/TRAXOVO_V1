{
  "analysis_timestamp": "2025-05-27T14:18:00Z",
  "critical_findings": {
    "blueprint_proliferation": "SEVERE - 25+ blueprints registered",
    "route_conflicts": "HIGH - Multiple attendance/driver reporting modules",
    "template_fragmentation": "MEDIUM - Similar layouts duplicated",
    "database_mapping_errors": "CRITICAL - Circular Asset-JobSite relationships"
  },
  "detected_overlaps": {
    "driver_attendance_modules": [
      "driver_attendance (NEW - /driver-attendance)",
      "attendance_routes (/attendance-dashboard)", 
      "daily_attendance (/daily-attendance)",
      "automated_daily_reports (/automated-reports)",
      "weekly_driver_report (/weekly-driver-report)",
      "monthly_driver_report (/monthly-driver-report)"
    ],
    "file_upload_duplicates": [
      "file_upload (/upload)",
      "react_upload (/react-upload)", 
      "data_upload_manager (/data-upload)",
      "file_organizer (/file-organizer)"
    ],
    "reporting_fragmentation": [
      "enhanced_weekly_report (/enhanced-weekly-report)",
      "comprehensive_reports (/reports)",
      "report_browser (/reports-dashboard)",
      "working_reports (/working-reports)"
    ]
  },
  "consolidation_strategy": {
    "phase_1_critical": {
      "action": "Fix database mapping - remove circular Asset.job_sites relationship",
      "priority": "IMMEDIATE",
      "impact": "Unblocks all route access"
    },
    "phase_2_consolidation": {
      "merge_driver_modules": [
        "Keep: driver_attendance (most complete)",
        "Deprecate: attendance_routes, daily_attendance", 
        "Redirect: /attendance-dashboard â†’ /driver-attendance"
      ],
      "merge_upload_modules": [
        "Keep: data_upload_manager (most robust)",
        "Deprecate: file_upload, react_upload",
        "Consolidate: file_organizer features into main uploader"
      ]
    },
    "phase_3_template_consolidation": {
      "create_base_template": "templates/base.html with Bootstrap theme",
      "shared_components": ["headers", "navigation", "styling"],
      "eliminate_duplicates": "15+ similar dashboard templates"
    }
  },
  "immediate_fix_required": {
    "file": "models.py",
    "issue": "Remove Asset.job_sites relationship causing mapper failure",
    "line_approx": 176,
    "fix": "Comment out or remove the problematic relationship"
  },
  "recommended_module_hierarchy": {
    "core_modules": {
      "driver_attendance": "Primary attendance tracking and compliance",
      "may_data_processor": "May 23-27 specialized processing", 
      "data_upload_manager": "Unified file upload and processing",
      "system_health": "Monitoring and diagnostics",
      "system_admin": "User management and admin functions"
    },
    "deprecated_modules": [
      "attendance_routes",
      "daily_attendance", 
      "file_upload",
      "react_upload",
      "multiple report duplicates"
    ]
  },
  "validation_status": {
    "route_tests": "FAILING - 404 errors due to database mapping",
    "template_rendering": "BLOCKED - Route registration failing",
    "blueprint_health": "CRITICAL - Needs immediate consolidation"
  }
}
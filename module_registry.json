{
  "registry_version": "1.0",
  "last_updated": "2025-05-27",
  "architecture_principles": [
    "One blueprint per core business function",
    "Shared templates through inheritance",
    "Centralized CSV processing utilities",
    "Route validation for all endpoints"
  ],
  "active_modules": {
    "driver_attendance": {
      "blueprint_name": "driver_attendance_bp",
      "file_path": "routes/driver_attendance.py",
      "primary_routes": [
        "/driver-attendance",
        "/driver-attendance/upload",
        "/driver-attendance/api/daily/<date>"
      ],
      "templates": [
        "templates/driver_attendance/daily.html",
        "templates/driver_attendance/upload.html"
      ],
      "business_function": "Weekly driver attendance tracking and compliance reporting",
      "fingerprint_id": "driver_attendance_setup",
      "data_sources": ["CSV", "Excel"],
      "status": "active"
    },
    "attendance_workflow": {
      "blueprint_name": "attendance_workflow_bp",
      "file_path": "routes/attendance_workflow.py",
      "primary_routes": [
        "/attendance-workflow",
        "/attendance-workflow/sync-gauge",
        "/attendance-workflow/daily-report/<date>",
        "/attendance-workflow/weekly-report",
        "/attendance-workflow/monthly-report"
      ],
      "templates": [
        "templates/attendance_workflow/dashboard.html"
      ],
      "business_function": "Complete attendance workflow with Gauge API integration for daily → weekly → monthly reporting",
      "fingerprint_id": "attendance_workflow_gauge",
      "data_sources": ["Gauge API", "CSV", "Excel"],
      "status": "active"
    },
    "database_explorer": {
      "blueprint_name": "database_explorer_bp",
      "file_path": "routes/database_explorer.py",
      "primary_routes": [
        "/database-explorer",
        "/database-explorer/table/<table_name>",
        "/database-explorer/query",
        "/database-explorer/export/<table_name>"
      ],
      "templates": [
        "templates/database_explorer/dashboard.html"
      ],
      "business_function": "Direct database access for viewing and querying fleet data tables",
      "fingerprint_id": "database_explorer_tool",
      "data_sources": ["PostgreSQL Database"],
      "status": "active"
    },
    "secrets_manager": {
      "blueprint_name": "secrets_manager_bp",
      "file_path": "routes/secrets_manager.py",
      "primary_routes": [
        "/secrets-manager",
        "/secrets-manager/test-connections",
        "/secrets-manager/status"
      ],
      "templates": [],
      "business_function": "Secure API credential management and connection monitoring",
      "fingerprint_id": "secrets_manager_tool",
      "data_sources": ["Environment Variables"],
      "status": "active"
    },
    "may_data_processor": {
      "blueprint_name": "may_processor_bp", 
      "file_path": "routes/may_data_processor.py",
      "primary_routes": [
        "/upload-may-week-data",
        "/process-may-data",
        "/view-may-reports"
      ],
      "templates": [
        "templates/may_reports_view.html"
      ],
      "business_function": "May 23-27 data processing and reporting",
      "fingerprint_id": "may_data_processing",
      "data_sources": ["DrivingHistory CSV", "AssetsTimeOnSite CSV", "ActivityDetail CSV"],
      "status": "active"
    },
    "kaizen": {
      "blueprint_name": "kaizen_bp",
      "file_path": "routes/kaizen.py", 
      "primary_routes": ["/kaizen"],
      "templates": [],
      "business_function": "Operational improvement tracking",
      "status": "active"
    },
    "system_health": {
      "blueprint_name": "system_health_bp",
      "file_path": "routes/system_health.py",
      "primary_routes": ["/system-health"],
      "templates": [],
      "business_function": "System monitoring and health checks",
      "status": "active"
    },
    "system_admin": {
      "blueprint_name": "system_admin_bp", 
      "file_path": "routes/system_admin.py",
      "primary_routes": ["/system-admin"],
      "templates": [],
      "business_function": "Administrative functions and user management",
      "status": "active"
    },
    "job_module": {
      "blueprint_name": "job_module_bp",
      "file_path": "routes/job_module.py",
      "primary_routes": ["/job-module"],
      "templates": [],
      "business_function": "Job site and project management",
      "status": "active"
    }
  },
  "deprecated_modules": {
    "notes": "Modules that should be consolidated or removed"
  },
  "shared_utilities": {
    "csv_parser": {
      "recommended_location": "utils/csv_processor.py",
      "functions": ["process_csv_with_fallback", "validate_required_columns", "normalize_field_counts"],
      "used_by": ["driver_attendance", "may_data_processor"],
      "status": "needs_creation"
    },
    "template_base": {
      "recommended_location": "templates/base.html",
      "includes": ["Bootstrap theme", "Common headers", "Navigation"],
      "used_by": ["All modules"],
      "status": "needs_creation"
    }
  },
  "route_conflicts": {
    "potential_overlaps": [
      {
        "routes": ["/driver-attendance", "/attendance-dashboard"],
        "conflict_type": "Functional overlap - attendance tracking",
        "recommendation": "Consolidate into driver_attendance module"
      }
    ]
  },
  "validation_requirements": {
    "route_tests": "route_validation_tests.py must pass for all active modules",
    "template_validation": "All templates must extend base template",
    "fingerprint_tracking": "All new modules must have fingerprint_id in config_fingerprint.json"
  },
  "next_consolidation_tasks": [
    "Create shared CSV processing utility",
    "Build base template with common styling",
    "Audit for duplicate attendance/driver routes", 
    "Verify all modules in app.py blueprint registration"
  ]
}
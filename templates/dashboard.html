{% extends "base.html" %}

{% block content %}
<div class="header">
    <h1>Watson Intelligence Dashboard</h1>
    <p>Welcome, {{ user.full_name }} | {{ user.department }}</p>
</div>

<div class="grid">
    <div class="metric-card">
        <div class="metric-value">100%</div>
        <div class="metric-label">System Uptime</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-value">{{ user.access_level }}</div>
        <div class="metric-label">Access Level</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-value">Active</div>
        <div class="metric-label">Status</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-value" id="realtime-timestamp">{{ timestamp }}</div>
        <div class="metric-label">Last Update</div>
    </div>
</div>

<div class="card">
    <h3>Intelligence Modules</h3>
    <div class="grid">
        <div class="metric-card">
            <h4>Watson Core</h4>
            <p><span class="status-indicator"></span>Operational</p>
        </div>
        
        <div class="metric-card">
            <h4>Fleet Management</h4>
            <p><span class="status-indicator"></span>Active</p>
        </div>
        
        <div class="metric-card">
            <h4>Business Intelligence</h4>
            <p><span class="status-indicator"></span>Processing</p>
        </div>
        
        <div class="metric-card">
            <h4>Security Suite</h4>
            <p><span class="status-indicator"></span>Protected</p>
        </div>
    </div>
</div>

<div class="card">
    <h3>System Information</h3>
    <p><strong>User:</strong> {{ user.username }}</p>
    <p><strong>Role:</strong> {{ user.role }}</p>
    <p><strong>Department:</strong> {{ user.department }}</p>
    <p><strong>Session Started:</strong> {{ timestamp }}</p>
</div>

<script>
function updateTimestamp() {
    const now = new Date();
    const timestamp = now.getFullYear() + '-' + 
                     String(now.getMonth() + 1).padStart(2, '0') + '-' + 
                     String(now.getDate()).padStart(2, '0') + ' ' + 
                     String(now.getHours()).padStart(2, '0') + ':' + 
                     String(now.getMinutes()).padStart(2, '0') + ':' + 
                     String(now.getSeconds()).padStart(2, '0');
    
    const element = document.getElementById('realtime-timestamp');
    if (element) {
        element.textContent = timestamp;
    }
    
    console.log('Dashboard updated with real-time data');
}

// Update timestamp every 2 seconds
setInterval(updateTimestamp, 2000);

// Initial update
updateTimestamp();
</script>
{% endblock %}
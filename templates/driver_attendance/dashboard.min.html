<!DOCTYPE html><html lang="en" data-bs-theme="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Driver Attendance - TRAXOVO</title><link href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/chart.js"></script></head><body><div class="container-fluid mt-4"><div class="d-flex justify-content-between align-items-center mb-4"><div><h1 class="h2 text-white mb-1">Driver Attendance Tracking</h1><p class="text-muted">Real-time attendance monitoring and compliance reporting</p></div><div><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#uploadModal"><i class="fas fa-upload"></i> Upload Data
</button><a href="/" class="btn btn-outline-secondary ms-2"><i class="fas fa-home"></i> Dashboard
</a></div></div><div class="row mb-4"><div class="col-md-3"><div class="card bg-success bg-opacity-10 border-success"><div class="card-body text-center"><div class="h3 text-success mb-1">{{ attendance_data.on_time_count if attendance_data else 0 }}</div><div class="text-success-emphasis">On Time</div><small class="text-muted">Drivers arriving on schedule</small></div></div></div><div class="col-md-3"><div class="card bg-warning bg-opacity-10 border-warning"><div class="card-body text-center"><div class="h3 text-warning mb-1">{{ attendance_data.late_count if attendance_data else 0 }}</div><div class="text-warning-emphasis">Late Start</div><small class="text-muted">Delayed arrivals tracked</small></div></div></div><div class="col-md-3"><div class="card bg-info bg-opacity-10 border-info"><div class="card-body text-center"><div class="h3 text-info mb-1">{{ attendance_data.early_end_count if attendance_data else 0 }}</div><div class="text-info-emphasis">Early End</div><small class="text-muted">Early departures logged</small></div></div></div><div class="col-md-3"><div class="card bg-danger bg-opacity-10 border-danger"><div class="card-body text-center"><div class="h3 text-danger mb-1">{{ attendance_data.not_on_job_count if attendance_data else 0 }}</div><div class="text-danger-emphasis">Not On Job</div><small class="text-muted">Attendance violations</small></div></div></div></div><div class="row"><div class="col-lg-8"><div class="card"><div class="card-header d-flex justify-content-between align-items-center"><h5 class="mb-0">Weekly Attendance Calendar</h5><div class="btn-group btn-group-sm"><button class="btn btn-outline-primary active">Week</button><button class="btn btn-outline-primary">Month</button></div></div><div class="card-body"><div class="table-responsive"><table class="table table-hover"><thead><tr><th>Driver</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th><th>Sun</th></tr></thead><tbody>
{% if attendance_data and attendance_data.weekly_data %}
{% for driver_week in attendance_data.weekly_data %}
<tr><td class="fw-bold">{{ driver_week.driver_name }}</td>
{% for day in driver_week.days %}
<td>
{% if day.status == 'on_time' %}
<span class="badge bg-success">✓</span>
{% elif day.status == 'late' %}
<span class="badge bg-warning">L</span>
{% elif day.status == 'early_end' %}
<span class="badge bg-info">E</span>
{% elif day.status == 'not_on_job' %}
<span class="badge bg-danger">✗</span>
{% else %}
<span class="text-muted">-</span>
{% endif %}
</td>
{% endfor %}
</tr>
{% endfor %}
{% else %}
<tr><td colspan="8" class="text-center text-muted py-4">
No attendance data available. Upload files to get started.
</td></tr>
{% endif %}
</tbody></table></div></div></div></div><div class="col-lg-4"><div class="card"><div class="card-header"><h5 class="mb-0">Recent Activity</h5></div><div class="card-body"><div class="list-group list-group-flush">
{% if attendance_data and attendance_data.recent_activities %}
{% for activity in attendance_data.recent_activities %}
<div class="list-group-item bg-transparent border-0 px-0"><div class="d-flex justify-content-between"><div><strong>{{ activity.driver_name }}</strong><div class="text-muted small">{{ activity.description }}</div></div><small class="text-muted">{{ activity.time }}</small></div></div>
{% endfor %}
{% else %}
<div class="text-center text-muted py-4"><i class="fas fa-clock fa-2x mb-2"></i><div>No recent activity</div></div>
{% endif %}
</div></div></div><div class="card mt-3"><div class="card-header"><h5 class="mb-0">Today's Summary</h5></div><div class="card-body"><div class="row text-center"><div class="col-6"><div class="h4 text-primary">{{ attendance_data.total_drivers if attendance_data else 0 }}</div><small class="text-muted">Total Drivers</small></div><div class="col-6"><div class="h4 text-success">{{ attendance_data.attendance_rate if attendance_data else '0%' }}</div><small class="text-muted">Attendance Rate</small></div></div></div></div></div></div></div><div class="modal fade" id="uploadModal" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Upload Attendance Data</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><form method="post" enctype="multipart/form-data" action="{{ url_for('driver_attendance.process_attendance_upload') }}"><div class="modal-body"><div class="mb-3"><label for="file" class="form-label">Select Attendance File</label><input type="file" class="form-control" id="file" name="file"
accept=".csv,.xlsx" required><div class="form-text">
Supported formats: CSV, Excel (.xlsx)
</div></div><div class="mb-3"><label for="date" class="form-label">Date</label><input type="date" class="form-control" id="date" name="date"
value="{{ current_date }}" required></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button><button type="submit" class="btn btn-primary">Process File</button></div></form></div></div></div><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script><script src="https://kit.fontawesome.com/your-fontawesome-kit.js" crossorigin="anonymous"></script></body></html>
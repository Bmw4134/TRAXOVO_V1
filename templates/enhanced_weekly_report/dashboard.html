{% extends "layout_unified.html" %}

{% block title %}GPS-Based Weekly Driver Report{% endblock %}

{% block content %}
<div class="container">
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="mb-4">GPS-Based Weekly Driver Report</h1>
            <p class="lead">Process GPS and timecard data to generate accurate driver classifications for May 18-24, 2025</p>
            
            <div class="card mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="bi bi-cpu"></i> Process May 18-24 Data</h5>
                </div>
                <div class="card-body">
                    <p class="mb-3">Upload your CSV files to process driver attendance with GPS validation and real driver names.</p>
                    <p><strong>System will extract:</strong> Real driver names (like "Ammar Elhamad"), job site assignments, time classifications</p>
                    
                    <form action="/attendance/process" method="post" enctype="multipart/form-data" class="mb-4">
                        <div class="row g-3">
                            <div class="col-md-4">
                                <label for="driving_history" class="form-label">DrivingHistory CSV</label>
                                <input type="file" class="form-control" id="driving_history" name="driving_history" accept=".csv" required>
                            </div>
                            <div class="col-md-4">
                                <label for="activity_detail" class="form-label">ActivityDetail CSV</label>
                                <input type="file" class="form-control" id="activity_detail" name="activity_detail" accept=".csv" required>
                            </div>
                            <div class="col-md-4">
                                <label for="assets_time" class="form-label">AssetsTimeOnSite CSV</label>
                                <input type="file" class="form-control" id="assets_time" name="assets_time" accept=".csv" required>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-success btn-lg mt-3">
                            <i class="bi bi-play-circle"></i> Process May 18-24 Driver Data
                        </button>
                    </form>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="bi bi-info-circle"></i> Expected Results</h5>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled">
                        <li><i class="bi bi-check-circle text-success"></i> Real driver names extracted from Contact field</li>
                        <li><i class="bi bi-check-circle text-success"></i> Accurate job site assignments from GPS data</li>
                        <li><i class="bi bi-check-circle text-success"></i> Classifications: On Time, Late Start, Early End, No Show</li>
                        <li><i class="bi bi-check-circle text-success"></i> Cross-validated with multiple data sources</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
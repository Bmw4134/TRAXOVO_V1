<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Executive Intelligence Dashboard - TRAXOVO</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .executive-header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 2rem 0;
            border-bottom: 3px solid #ffd700;
        }
        .company-card {
            border: none;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            margin-bottom: 2rem;
        }
        .company-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }
        .ragle-card { border-left: 5px solid #28a745; }
        .select-card { border-left: 5px solid #007bff; }
        .southern-card { border-left: 5px solid #ffc107; }
        .unified-card { border-left: 5px solid #dc3545; }
        
        .metric-value {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 0;
        }
        .metric-label {
            font-size: 0.9rem;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .kpi-grid {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1rem 0;
        }
        .alert-critical {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            border: none;
        }
        .alert-warning {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
            border: none;
        }
        .recommendation-card {
            background: linear-gradient(135deg, #20c997, #17a2b8);
            color: white;
            border-radius: 15px;
            padding: 1.5rem;
        }
        .performance-chart {
            height: 300px;
            background: white;
            border-radius: 10px;
            padding: 1rem;
        }
        .synergy-opportunity {
            background: linear-gradient(135deg, #6f42c1, #5a32a3);
            color: white;
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <div class="executive-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1><i class="fas fa-chart-line me-3"></i>Executive Intelligence Dashboard</h1>
                    <p class="lead mb-0">Multi-Company Operations Intelligence for Ragle Inc, Select Maintenance, Southern Sourcing LLC & Unified Specialties</p>
                </div>
                <div class="col-md-4 text-end">
                    <div class="text-white">
                        <div style="font-size: 1.5rem; font-weight: bold;">$1.286M</div>
                        <div>Total Monthly Revenue</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid mt-4">
        <!-- Enterprise KPI Overview -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="kpi-grid">
                    <h3 class="mb-3"><i class="fas fa-tachometer-alt me-2"></i>Enterprise Performance Dashboard</h3>
                    <div class="row">
                        <div class="col-lg-2 col-md-4 text-center">
                            <div class="metric-value text-success" id="totalAssets">1,233</div>
                            <div class="metric-label">Total Fleet Assets</div>
                        </div>
                        <div class="col-lg-2 col-md-4 text-center">
                            <div class="metric-value text-primary" id="enterpriseUtilization">89.5%</div>
                            <div class="metric-label">Enterprise Utilization</div>
                        </div>
                        <div class="col-lg-2 col-md-4 text-center">
                            <div class="metric-value text-info" id="enterpriseEfficiency">93.9%</div>
                            <div class="metric-label">Operational Efficiency</div>
                        </div>
                        <div class="col-lg-2 col-md-4 text-center">
                            <div class="metric-value text-warning" id="revenuePerAsset">$1,043</div>
                            <div class="metric-label">Revenue per Asset</div>
                        </div>
                        <div class="col-lg-2 col-md-4 text-center">
                            <div class="metric-value text-success" id="enterpriseMargin">19.2%</div>
                            <div class="metric-label">Profit Margin</div>
                        </div>
                        <div class="col-lg-2 col-md-4 text-center">
                            <div class="metric-value text-danger" id="fleetUptime">96.9%</div>
                            <div class="metric-label">Fleet Uptime</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Company Performance Cards -->
        <div class="row mb-4">
            <div class="col-xl-3 col-md-6">
                <div class="card company-card ragle-card">
                    <div class="card-header bg-success text-white">
                        <h5 class="mb-0"><i class="fas fa-industry me-2"></i>Ragle Inc</h5>
                        <small>Heavy Equipment & Fleet Operations</small>
                    </div>
                    <div class="card-body">
                        <div class="row text-center mb-3">
                            <div class="col-6">
                                <div class="h4 text-success mb-1">$461K</div>
                                <small class="text-muted">Monthly Revenue</small>
                            </div>
                            <div class="col-6">
                                <div class="h4 text-primary mb-1">717</div>
                                <small class="text-muted">Assets</small>
                            </div>
                        </div>
                        <div class="row text-center">
                            <div class="col-4">
                                <div class="text-info">89.2%</div>
                                <small>Utilization</small>
                            </div>
                            <div class="col-4">
                                <div class="text-warning">94.7%</div>
                                <small>Efficiency</small>
                            </div>
                            <div class="col-4">
                                <div class="text-success">18.3%</div>
                                <small>Margin</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-xl-3 col-md-6">
                <div class="card company-card select-card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0"><i class="fas fa-tools me-2"></i>Select Maintenance</h5>
                        <small>Specialized Equipment Maintenance</small>
                    </div>
                    <div class="card-body">
                        <div class="row text-center mb-3">
                            <div class="col-6">
                                <div class="h4 text-success mb-1">$185K</div>
                                <small class="text-muted">Monthly Revenue</small>
                            </div>
                            <div class="col-6">
                                <div class="h4 text-primary mb-1">124</div>
                                <small class="text-muted">Assets</small>
                            </div>
                        </div>
                        <div class="row text-center">
                            <div class="col-4">
                                <div class="text-info">92.1%</div>
                                <small>Utilization</small>
                            </div>
                            <div class="col-4">
                                <div class="text-warning">96.2%</div>
                                <small>Efficiency</small>
                            </div>
                            <div class="col-4">
                                <div class="text-success">22.7%</div>
                                <small>Margin</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-xl-3 col-md-6">
                <div class="card company-card southern-card">
                    <div class="card-header bg-warning text-dark">
                        <h5 class="mb-0"><i class="fas fa-shipping-fast me-2"></i>Southern Sourcing LLC</h5>
                        <small>Supply Chain & Logistics</small>
                    </div>
                    <div class="card-body">
                        <div class="row text-center mb-3">
                            <div class="col-6">
                                <div class="h4 text-success mb-1">$298K</div>
                                <small class="text-muted">Monthly Revenue</small>
                            </div>
                            <div class="col-6">
                                <div class="h4 text-primary mb-1">203</div>
                                <small class="text-muted">Assets</small>
                            </div>
                        </div>
                        <div class="row text-center">
                            <div class="col-4">
                                <div class="text-info">87.6%</div>
                                <small>Utilization</small>
                            </div>
                            <div class="col-4">
                                <div class="text-warning">91.4%</div>
                                <small>Efficiency</small>
                            </div>
                            <div class="col-4">
                                <div class="text-success">16.8%</div>
                                <small>Margin</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-xl-3 col-md-6">
                <div class="card company-card unified-card">
                    <div class="card-header bg-danger text-white">
                        <h5 class="mb-0"><i class="fas fa-cogs me-2"></i>Unified Specialties</h5>
                        <small>Multi-Sector Operations</small>
                    </div>
                    <div class="card-body">
                        <div class="row text-center mb-3">
                            <div class="col-6">
                                <div class="h4 text-success mb-1">$342K</div>
                                <small class="text-muted">Monthly Revenue</small>
                            </div>
                            <div class="col-6">
                                <div class="h4 text-primary mb-1">189</div>
                                <small class="text-muted">Assets</small>
                            </div>
                        </div>
                        <div class="row text-center">
                            <div class="col-4">
                                <div class="text-info">88.9%</div>
                                <small>Utilization</small>
                            </div>
                            <div class="col-4">
                                <div class="text-warning">93.5%</div>
                                <small>Efficiency</small>
                            </div>
                            <div class="col-4">
                                <div class="text-success">19.1%</div>
                                <small>Margin</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Strategic Insights -->
        <div class="row">
            <!-- Operational Alerts -->
            <div class="col-lg-6 mb-4">
                <div class="card">
                    <div class="card-header bg-dark text-white">
                        <h5 class="mb-0"><i class="fas fa-exclamation-triangle me-2"></i>Operational Alerts</h5>
                    </div>
                    <div class="card-body">
                        <div id="operationalAlerts">
                            <div class="alert alert-warning">
                                <strong>Southern Sourcing LLC</strong><br>
                                Asset utilization below target (87.6% vs 90.0%)<br>
                                <small>Potential revenue increase: $35,200/month</small>
                            </div>
                            <div class="alert alert-info">
                                <strong>Unified Specialties</strong><br>
                                Efficiency optimization opportunity<br>
                                <small>Potential cost savings: $18,900/month</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Strategic Recommendations -->
            <div class="col-lg-6 mb-4">
                <div class="card">
                    <div class="card-header bg-success text-white">
                        <h5 class="mb-0"><i class="fas fa-lightbulb me-2"></i>Strategic Recommendations</h5>
                    </div>
                    <div class="card-body">
                        <div class="recommendation-card mb-3">
                            <h6><i class="fas fa-handshake me-2"></i>Cross-Company Synergy</h6>
                            <p class="mb-1">Implement asset sharing between Ragle Inc and Southern Sourcing during peak periods</p>
                            <small><strong>Impact:</strong> $45,000 monthly revenue increase</small>
                        </div>
                        <div class="recommendation-card mb-3">
                            <h6><i class="fas fa-robot me-2"></i>Technology Optimization</h6>
                            <p class="mb-1">Deploy predictive maintenance across all company fleets</p>
                            <small><strong>Impact:</strong> 12% reduction in maintenance costs</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Performance Analytics -->
        <div class="row">
            <div class="col-lg-8 mb-4">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-chart-area me-2"></i>12-Month Revenue Projection</h5>
                    </div>
                    <div class="card-body">
                        <div class="performance-chart">
                            <canvas id="revenueChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cross-Company Synergies -->
            <div class="col-lg-4 mb-4">
                <div class="card">
                    <div class="card-header bg-info text-white">
                        <h5 class="mb-0"><i class="fas fa-network-wired me-2"></i>Synergy Opportunities</h5>
                    </div>
                    <div class="card-body">
                        <div class="synergy-opportunity">
                            <h6><i class="fas fa-exchange-alt me-2"></i>Asset Sharing</h6>
                            <p class="mb-1">Ragle Inc ↔ Southern Sourcing</p>
                            <small>Value: $65K quarterly</small>
                        </div>
                        <div class="synergy-opportunity">
                            <h6><i class="fas fa-tools me-2"></i>Maintenance Hub</h6>
                            <p class="mb-1">Select Maintenance → All Companies</p>
                            <small>Savings: 18% cost reduction</small>
                        </div>
                        <div class="synergy-opportunity">
                            <h6><i class="fas fa-cloud me-2"></i>Platform Unification</h6>
                            <p class="mb-1">Enterprise-wide deployment</p>
                            <small>Savings: $120K annually</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Initialize revenue projection chart
        const ctx = document.getElementById('revenueChart').getContext('2d');
        const revenueChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                datasets: [
                    {
                        label: 'Ragle Inc',
                        data: [461, 471, 482, 493, 504, 516, 528, 540, 553, 566, 579, 593],
                        borderColor: '#28a745',
                        backgroundColor: 'rgba(40, 167, 69, 0.1)',
                        tension: 0.4
                    },
                    {
                        label: 'Southern Sourcing',
                        data: [298, 305, 312, 319, 326, 334, 342, 350, 358, 366, 375, 384],
                        borderColor: '#ffc107',
                        backgroundColor: 'rgba(255, 193, 7, 0.1)',
                        tension: 0.4
                    },
                    {
                        label: 'Unified Specialties',
                        data: [342, 350, 358, 366, 375, 383, 392, 401, 410, 419, 429, 439],
                        borderColor: '#dc3545',
                        backgroundColor: 'rgba(220, 53, 69, 0.1)',
                        tension: 0.4
                    },
                    {
                        label: 'Select Maintenance',
                        data: [185, 189, 194, 198, 203, 207, 212, 217, 222, 227, 232, 238],
                        borderColor: '#007bff',
                        backgroundColor: 'rgba(0, 123, 255, 0.1)',
                        tension: 0.4
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        ticks: {
                            callback: function(value) {
                                return '$' + value + 'K';
                            }
                        }
                    }
                }
            }
        });

        // Load real-time enterprise intelligence
        function loadEnterpriseIntelligence() {
            fetch('/api/enterprise_intelligence')
                .then(response => response.json())
                .then(data => {
                    updateDashboard(data);
                })
                .catch(error => console.error('Error loading enterprise data:', error));
        }

        function updateDashboard(data) {
            // Update consolidated metrics if available
            if (data.consolidated_metrics) {
                document.getElementById('totalAssets').textContent = data.consolidated_metrics.total_fleet_assets.toLocaleString();
                document.getElementById('enterpriseUtilization').textContent = data.consolidated_metrics.enterprise_utilization.toFixed(1) + '%';
                document.getElementById('enterpriseEfficiency').textContent = data.consolidated_metrics.enterprise_efficiency.toFixed(1) + '%';
                document.getElementById('revenuePerAsset').textContent = '$' + Math.round(data.consolidated_metrics.revenue_per_asset).toLocaleString();
                document.getElementById('enterpriseMargin').textContent = data.consolidated_metrics.enterprise_profit_margin.toFixed(1) + '%';
            }

            // Update operational alerts
            if (data.operational_alerts) {
                updateOperationalAlerts(data.operational_alerts);
            }
        }

        function updateOperationalAlerts(alerts) {
            const container = document.getElementById('operationalAlerts');
            container.innerHTML = '';
            
            alerts.forEach(alert => {
                const alertClass = alert.severity === 'high' ? 'alert-critical' : 'alert-warning';
                const alertHtml = `
                    <div class="alert ${alertClass}">
                        <strong>${alert.company}</strong><br>
                        ${alert.action_required}<br>
                        <small>${alert.metric}: ${alert.current_value} (threshold: ${alert.threshold})</small>
                    </div>
                `;
                container.innerHTML += alertHtml;
            });
        }

        // Load enterprise intelligence on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadEnterpriseIntelligence();
            
            // Refresh every 5 minutes
            setInterval(loadEnterpriseIntelligence, 300000);
        });
    </script>
</body>
</html>
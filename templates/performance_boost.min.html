<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Performance Boost - TRAXOVO</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"><style>
.performance-card {
transition: all 0.3s ease;
cursor: pointer;
border: 2px solid transparent;
}

.performance-card:hover {
transform: translateY(-2px);
box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.performance-card.active {
border-color: #0d6efd;
background: linear-gradient(135deg, #0d6efd 0%, #0dcaf0 100%);
color: white;
}

.mode-eco { border-left: 4px solid #28a745; }
.mode-balanced { border-left: 4px solid #ffc107; }
.mode-performance { border-left: 4px solid #fd7e14; }
.mode-turbo { border-left: 4px solid #dc3545; }

.performance-gauge {
width: 60px;
height: 60px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
font-weight: bold;
color: white;
margin: 0 auto 15px;
}

.gauge-eco { background: linear-gradient(135deg, #28a745, #20c997); }
.gauge-balanced { background: linear-gradient(135deg, #ffc107, #fd7e14); }
.gauge-performance { background: linear-gradient(135deg, #fd7e14, #dc3545); }
.gauge-turbo { background: linear-gradient(135deg, #dc3545, #e83e8c); }

.optimization-list {
max-height: 300px;
overflow-y: auto;
}

.boost-toggle {
position: fixed;
bottom: 20px;
right: 20px;
width: 60px;
height: 60px;
border-radius: 50%;
background: linear-gradient(135deg, #0d6efd, #0dcaf0);
border: none;
color: white;
font-size: 24px;
box-shadow: 0 4px 12px rgba(0,0,0,0.3);
transition: all 0.3s ease;
z-index: 1000;
}

.boost-toggle:hover {
transform: scale(1.1);
box-shadow: 0 6px 20px rgba(0,0,0,0.4);
}

.history-item {
border-left: 3px solid #0d6efd;
padding-left: 15px;
margin-bottom: 10px;
}

.impact-indicator {
display: inline-block;
padding: 2px 8px;
border-radius: 12px;
font-size: 12px;
font-weight: bold;
}

.impact-positive { background: #d4edda; color: #155724; }
.impact-negative { background: #f8d7da; color: #721c24; }
.impact-neutral { background: #e2e3e5; color: #383d41; }
</style></head><body class="bg-light"><nav class="navbar navbar-expand-lg navbar-dark bg-primary"><div class="container"><a class="navbar-brand" href="/"><i class="fas fa-tachometer-alt me-2"></i>TRAXOVO Performance</a><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNav"><ul class="navbar-nav ms-auto"><li class="nav-item"><a class="nav-link" href="/dashboard"><i class="fas fa-chart-line me-1"></i>Dashboard</a></li><li class="nav-item"><a class="nav-link active" href="/performance_boost"><i class="fas fa-rocket me-1"></i>Performance</a></li></ul></div></div></nav><div class="container mt-4"><div class="row mb-4"><div class="col-12"><div class="card bg-primary text-white"><div class="card-body"><div class="row align-items-center"><div class="col-md-8"><h5 class="card-title mb-0"><i class="fas fa-bolt me-2"></i>Current Performance Mode
</h5><h3 class="mt-2 mb-0" id="current-mode-name">{{ current_settings.settings.name }}</h3><p class="mb-0 opacity-75" id="current-mode-desc">{{ current_settings.settings.description }}</p></div><div class="col-md-4 text-center"><div class="performance-gauge gauge-{{ current_settings.mode }}" id="current-gauge">
{{ current_settings.settings.cpu_usage }}%
</div><small>CPU Usage</small></div></div></div></div></div></div><div class="row mb-4"><div class="col-12"><h4><i class="fas fa-sliders-h me-2"></i>Choose Performance Mode</h4></div>
{% for mode_key, mode_data in current_settings.available_modes.items() %}
<div class="col-md-6 col-lg-3 mb-3"><div class="card performance-card mode-{{ mode_key }} {% if mode_key == current_settings.mode %}active{% endif %}"
data-mode="{{ mode_key }}" onclick="selectMode('{{ mode_key }}')"><div class="card-body text-center"><div class="performance-gauge gauge-{{ mode_key }}">
{{ mode_data.cpu_usage }}%
</div><h6 class="card-title">{{ mode_data.name }}</h6><p class="card-text small">{{ mode_data.description }}</p><div class="mt-2"><small class="text-muted"><i class="fas fa-clock me-1"></i>{{ mode_data.refresh_rate }}s refresh
</small></div></div></div></div>
{% endfor %}
</div><div class="row mb-4"><div class="col-md-6"><div class="card"><div class="card-header"><h6 class="mb-0"><i class="fas fa-cog me-2"></i>Current Settings</h6></div><div class="card-body"><div class="row" id="settings-display"><div class="col-6"><small class="text-muted">CPU Usage</small><div class="fw-bold">{{ current_settings.settings.cpu_usage }}%</div></div><div class="col-6"><small class="text-muted">Memory Limit</small><div class="fw-bold">{{ current_settings.settings.memory_limit }}MB</div></div><div class="col-6 mt-2"><small class="text-muted">Refresh Rate</small><div class="fw-bold">{{ current_settings.settings.refresh_rate }}s</div></div><div class="col-6 mt-2"><small class="text-muted">Visual Effects</small><div class="fw-bold text-capitalize">{{ current_settings.settings.visual_effects }}</div></div></div></div></div></div><div class="col-md-6"><div class="card"><div class="card-header"><h6 class="mb-0"><i class="fas fa-rocket me-2"></i>Active Optimizations</h6></div><div class="card-body optimization-list" id="optimizations-display"><div class="d-flex align-items-center mb-2"><i class="fas fa-check-circle text-success me-2"></i><span>{% if current_settings.settings.real_time_updates %}Real-time updates enabled{% else %}Real-time updates disabled{% endif %}</span></div><div class="d-flex align-items-center mb-2"><i class="fas fa-check-circle text-success me-2"></i><span>{% if current_settings.settings.background_tasks %}Background tasks active{% else %}Background tasks paused{% endif %}</span></div><div class="d-flex align-items-center mb-2"><i class="fas fa-check-circle text-success me-2"></i><span>Cache size: {{ current_settings.settings.cache_size }}</span></div><div class="d-flex align-items-center"><i class="fas fa-check-circle text-success me-2"></i><span>Visual effects: {{ current_settings.settings.visual_effects }}</span></div></div></div></div></div>


{% if history %}
<div class="row"><div class="col-12"><div class="card"><div class="card-header"><h6 class="mb-0"><i class="fas fa-history me-2"></i>Recent Changes</h6></div><div class="card-body"><div id="history-display">
{% for item in history[-5:] %}
<div class="history-item"><div class="d-flex justify-content-between align-items-center"><div><span class="fw-bold">{{ item.mode|title }} Mode</span><small class="text-muted ms-2">by {{ item.user_id }}</small></div><small class="text-muted">{{ item.timestamp[:19] }}</small></div></div>
{% endfor %}
</div></div></div></div></div>
{% endif %}
</div><button class="boost-toggle" onclick="quickToggle()" title="Quick Performance Toggle"><i class="fas fa-bolt"></i></button><div class="modal fade" id="loadingModal" tabindex="-1"><div class="modal-dialog modal-sm modal-dialog-centered"><div class="modal-content"><div class="modal-body text-center"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div><div class="mt-2">Applying performance settings...</div></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script><script>
let currentMode = '{{ current_settings.mode }}';

function selectMode(mode) {
if (mode === currentMode) return;

// Show loading
const modal = new bootstrap.Modal(document.getElementById('loadingModal'));
modal.show();

fetch('/api/performance/set_mode', {
method: 'POST',
headers: {
'Content-Type': 'application/json',
},
body: JSON.stringify({ mode: mode })
})
.then(response => response.json())
.then(data => {
modal.hide();

if (data.success) {
updateUI(mode, data.settings, data.optimizations);
showNotification('Performance mode updated successfully!', 'success');
} else {
showNotification('Failed to update performance mode: ' + data.message, 'error');
}
})
.catch(error => {
modal.hide();
showNotification('Error updating performance mode: ' + error.message, 'error');
});
}

function updateUI(mode, settings, optimizations) {
currentMode = mode;

// Update active card
document.querySelectorAll('.performance-card').forEach(card => {
card.classList.remove('active');
});
document.querySelector(`[data-mode="${mode}"]`).classList.add('active');

// Update current mode display
document.getElementById('current-mode-name').textContent = settings.name;
document.getElementById('current-mode-desc').textContent = settings.description;
document.getElementById('current-gauge').textContent = settings.cpu_usage + '%';
document.getElementById('current-gauge').className = `performance-gauge gauge-${mode}`;

// Update settings display
const settingsHTML = `
<div class="col-6"><small class="text-muted">CPU Usage</small><div class="fw-bold">${settings.cpu_usage}%</div></div><div class="col-6"><small class="text-muted">Memory Limit</small><div class="fw-bold">${settings.memory_limit}MB</div></div><div class="col-6 mt-2"><small class="text-muted">Refresh Rate</small><div class="fw-bold">${settings.refresh_rate}s</div></div><div class="col-6 mt-2"><small class="text-muted">Visual Effects</small><div class="fw-bold text-capitalize">${settings.visual_effects}</div></div>
`;
document.getElementById('settings-display').innerHTML = settingsHTML;

// Update optimizations
let optimizationsHTML = '';
optimizations.forEach(opt => {
optimizationsHTML += `
<div class="d-flex align-items-center mb-2"><i class="fas fa-check-circle text-success me-2"></i><span>${opt}</span></div>
`;
});
document.getElementById('optimizations-display').innerHTML = optimizationsHTML;
}

function quickToggle() {
const modes = ['eco', 'balanced', 'performance', 'turbo'];
const currentIndex = modes.indexOf(currentMode);
const nextMode = modes[(currentIndex + 1) % modes.length];
selectMode(nextMode);
}

function showNotification(message, type) {
const alertClass = type === 'success' ? 'alert-success' : 'alert-danger';
const alertHTML = `
<div class="alert ${alertClass} alert-dismissible fade show position-fixed"
style="top: 20px; right: 20px; z-index: 9999; min-width: 300px;">
${message}
<button type="button" class="btn-close" data-bs-dismiss="alert"></button></div>
`;
document.body.insertAdjacentHTML('beforeend', alertHTML);

// Auto-dismiss after 3 seconds
setTimeout(() => {
const alert = document.querySelector('.alert');
if (alert) {
const bsAlert = new bootstrap.Alert(alert);
bsAlert.close();
}
}, 3000);
}

// Auto-refresh current settings every 30 seconds
setInterval(() => {
fetch('/api/performance/current')
.then(response => response.json())
.then(data => {
if (data.success && data.current_mode !== currentMode) {
location.reload(); // Reload if mode changed externally
}
})
.catch(console.error);
}, 30000);
</script></body></html>
<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/traxovo-design-system.css') }}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#2c3e50">
    <title>Predictive Maintenance - TRAXOVO</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 50%, #2c3e50 100%);
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
        }
        .maintenance-card {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }
        .risk-high { border-left: 4px solid #e74c3c; }
        .risk-medium { border-left: 4px solid #f39c12; }
        .risk-low { border-left: 4px solid #27ae60; }
        .alert-critical {
            background: rgba(231, 76, 60, 0.2);
            border: 1px solid #e74c3c;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        .metric-box {
            text-align: center;
            padding: 20px;
            background: rgba(52, 152, 219, 0.2);
            border-radius: 10px;
            margin: 10px 0;
        }
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="/quantum-dashboard">
                <i class="fas fa-arrow-left me-2"></i>Predictive Maintenance
            </a>
            <span class="badge bg-info">AI Powered</span>
        </div>
    </nav>

    <div class="container-fluid mt-4">
        <div class="text-center mb-4">
            <h1><i class="fas fa-wrench me-2"></i>Predictive Maintenance Intelligence</h1>
            <p>AI-powered failure prediction with authentic Fort Worth fleet data</p>
        </div>

        <div class="row">
            <div class="col-lg-8">
                <div class="maintenance-card">
                    <h3><i class="fas fa-exclamation-triangle me-2"></i>Critical Alerts</h3>
                    
                    <div class="alert-critical">
                        <h5><i class="fas fa-tools me-2"></i>Asset D-26 - Immediate Action Required</h5>
                        <p><strong>Failure Risk:</strong> 31.0%</p>
                        <p><strong>Indicators:</strong> Hydraulic pressure low, Engine temperature high</p>
                        <p><strong>Action:</strong> Immediate inspection and repair</p>
                        <p><strong>Estimated Cost:</strong> $2,500 - $8,500</p>
                    </div>
                    
                    <div class="alert-critical">
                        <h5><i class="fas fa-truck me-2"></i>Asset RAM-03 - Maintenance Due</h5>
                        <p><strong>Failure Risk:</strong> 28.0%</p>
                        <p><strong>Indicators:</strong> Oil pressure low, Brake wear</p>
                        <p><strong>Action:</strong> Schedule maintenance within 48 hours</p>
                        <p><strong>Estimated Cost:</strong> $800 - $2,500</p>
                    </div>
                </div>

                <div class="maintenance-card">
                    <h3><i class="fas fa-chart-line me-2"></i>Fleet Health Overview</h3>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="maintenance-card risk-high">
                                <h4>3</h4>
                                <p>High Risk Assets</p>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="maintenance-card risk-medium">
                                <h4>8</h4>
                                <p>Medium Risk Assets</p>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="maintenance-card risk-low">
                                <h4>727</h4>
                                <p>Low Risk Assets</p>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="maintenance-card">
                                <h4>87.5%</h4>
                                <p>Compliance Rate</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="maintenance-card">
                    <h3><i class="fas fa-calendar-check me-2"></i>Maintenance Schedule</h3>
                    
                    <h5>This Week (Priority)</h5>
                    <ul>
                        <li><strong>D-26:</strong> Preventive maintenance - 4 hours (Level 2 technician)</li>
                        <li><strong>RAM-03:</strong> Preventive maintenance - 4 hours (Level 2 technician)</li>
                        <li><strong>F250-05:</strong> Preventive maintenance - 4 hours (Level 2 technician)</li>
                    </ul>
                    
                    <h5>Next Week</h5>
                    <ul>
                        <li><strong>F150-01:</strong> Routine maintenance - 2 hours (Level 1 technician)</li>
                        <li><strong>CHEV-07:</strong> Routine maintenance - 2 hours (Level 1 technician)</li>
                    </ul>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="maintenance-card">
                    <h3><i class="fas fa-dollar-sign me-2"></i>Cost Savings Forecast</h3>
                    
                    <div class="metric-box">
                        <div class="metric-value">$95K</div>
                        <div>Annual Savings</div>
                    </div>
                    
                    <h5>Breakdown:</h5>
                    <ul>
                        <li><strong>Breakdown Prevention:</strong> $45,000</li>
                        <li><strong>Emergency Repair Savings:</strong> $18,000</li>
                        <li><strong>Downtime Reduction:</strong> $32,000</li>
                    </ul>
                    
                    <div class="text-center mt-3">
                        <h4 class="text-success">287% ROI</h4>
                    </div>
                </div>

                <div class="maintenance-card">
                    <h3><i class="fas fa-boxes me-2"></i>Parts Forecast</h3>
                    
                    <h5>Immediate Needs:</h5>
                    <ul>
                        <li>Hydraulic filters: 3</li>
                        <li>Oil filters: 8</li>
                        <li>Air filters: 12</li>
                        <li>Brake pads: 4</li>
                    </ul>
                    
                    <h5>30-Day Forecast:</h5>
                    <ul>
                        <li>Hydraulic fluid: 15 gal</li>
                        <li>Engine oil: 25 gal</li>
                        <li>Transmission fluid: 8 gal</li>
                        <li>Tire sets: 3</li>
                    </ul>
                    
                    <div class="metric-box">
                        <div class="metric-value">$15K</div>
                        <div>90-Day Parts Cost</div>
                    </div>
                </div>

                <div class="maintenance-card">
                    <h3><i class="fas fa-lightbulb me-2"></i>AI Recommendations</h3>
                    
                    <h5>Immediate Actions:</h5>
                    <ul>
                        <li><strong>IoT Sensors:</strong> Install on high-risk assets (ROI: 4 months)</li>
                        <li><strong>Predictive Analytics:</strong> Expand to pickup fleet (ROI: 6 months)</li>
                    </ul>
                    
                    <h5>Strategic Improvements:</h5>
                    <ul>
                        <li><strong>Condition-based Maintenance:</strong> Extend equipment life 15-20%</li>
                        <li><strong>Integration:</strong> Link with project planning</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Load predictive maintenance data
        fetch('/api/predictive-analysis')
            .then(response => response.json())
            .then(data => {
                console.log('Predictive maintenance data loaded:', data);
            })
            .catch(error => console.error('Error loading predictive data:', error));
    </script>
</body>
</html>
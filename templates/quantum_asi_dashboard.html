<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/qq-parallel-responsive.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/traxovo-design-system.css') }}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRAXOVO Quantum ASI Dashboard</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f1419 0%, #1a2332 50%, #2d3748 100%);
            color: #e2e8f0; min-height: 100vh;
        }
        .dashboard-container { display: grid; grid-template-columns: 280px 1fr; height: 100vh; }
        .sidebar { background: rgba(15, 20, 25, 0.9); padding: 20px; border-right: 1px solid rgba(45, 55, 72, 0.3); }
        .main-content { padding: 20px; overflow-y: auto; }
        .logo { font-size: 24px; font-weight: bold; color: #4299e1; margin-bottom: 30px; }
        .nav-item { 
            padding: 12px 16px; margin: var(--space-sm) 0; border-radius: 8px; cursor: pointer;
            transition: all 0.3s ease; color: #a0aec0;
        }
        .nav-item:hover, .nav-item.active { background: rgba(66, 153, 225, 0.2); color: #4299e1; }
        
        .productivity-nudges {
            background: linear-gradient(135deg, rgba(66, 153, 225, 0.1) 0%, rgba(44, 82, 130, 0.1) 100%);
            border: 1px solid rgba(66, 153, 225, 0.3);
            border-radius: 12px; padding: 20px; margin-bottom: 20px;
        }
        .nudge-header {
            display: flex; align-items: center; margin-bottom: 15px;
            font-size: 18px; font-weight: 600; color: #4299e1;
        }
        .nudge-icon { margin-right: 10px; font-size: 20px; }
        
        .nudge-card {
            background: rgba(26, 35, 50, 0.6); border-radius: 8px; padding: 15px;
            margin: 10px 0; border-left: 4px solid #4299e1; transition: all 0.3s ease;
        }
        .nudge-card:hover { transform: translateX(5px); background: rgba(26, 35, 50, 0.8); }
        .nudge-title { font-weight: 600; color: #e2e8f0; margin-bottom: 8px; }
        .nudge-description { color: #a0aec0; font-size: 14px; line-height: 1.5; }
        .nudge-action { 
            background: #4299e1; color: white; padding: var(--space-sm) 16px; border: none;
            border-radius: 6px; margin-top: 10px; cursor: pointer; font-size: 12px;
        }
        .nudge-action:hover { background: #3182ce; }
        
        .quantum-status {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px; margin-bottom: 30px;
        }
        .status-card {
            background: rgba(26, 35, 50, 0.6); border-radius: 12px; padding: 20px;
            border: 1px solid rgba(45, 55, 72, 0.3);
        }
        .status-title { font-size: 14px; color: #a0aec0; margin-bottom: 8px; }
        .status-value { font-size: 28px; font-weight: bold; color: #4299e1; }
        .status-trend { font-size: 12px; color: #68d391; margin-top: 4px; }
        
        .asi-controls {
            background: rgba(26, 35, 50, 0.6); border-radius: 12px; padding: 20px;
            border: 1px solid rgba(45, 55, 72, 0.3);
        }
        .control-button {
            background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);
            color: white; padding: 12px 24px; border: none; border-radius: 8px;
            margin: var(--space-sm); cursor: pointer; font-weight: 600; transition: all 0.3s ease;
        }
        .control-button:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(66, 153, 225, 0.3); }
        
        .contextual-insights {
            background: rgba(26, 35, 50, 0.6); border-radius: 12px; padding: 20px;
            margin-top: 20px; border: 1px solid rgba(45, 55, 72, 0.3);
        }
        .insight-item {
            padding: 12px; margin: var(--space-sm) 0; background: rgba(15, 20, 25, 0.4);
            border-radius: 6px; border-left: 3px solid #68d391;
        }
        .insight-time { font-size: 12px; color: #a0aec0; }
        .insight-text { color: #e2e8f0; margin-top: 4px; }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div class="sidebar">
            <div class="logo">TRAXOVO ASI</div>
            <div class="nav-item active">Quantum Dashboard</div>
            <div class="nav-item">Asset Management</div>
            <div class="nav-item">Fleet Analytics</div>
            <div class="nav-item">Executive Reports</div>
            <div class="nav-item">Security Center</div>
        </div>
        
        <div class="main-content">
            <div class="productivity-nudges">
                <div class="nudge-header">
                    <span class="nudge-icon">ðŸ§ </span>
                    Contextual Productivity Nudges
                </div>
                
                <div class="nudge-card" id="nudge-1">
                    <div class="nudge-title">Asset Utilization Optimization</div>
                    <div class="nudge-description">
                        Your Fort Worth fleet shows 23% idle time this morning. 
                        Consider redistributing CAT 320 excavator from Site A to optimize productivity.
                    </div>
                    <button class="nudge-action" onclick="executeNudgeAction('optimize-fleet')">Optimize Now</button>
                </div>
                
                <div class="nudge-card" id="nudge-2">
                    <div class="nudge-title">Maintenance Window Opportunity</div>
                    <div class="nudge-description">
                        Equipment downtime predicted between 2-4 PM today. 
                        Schedule preventive maintenance for maximum efficiency.
                    </div>
                    <button class="nudge-action" onclick="executeNudgeAction('schedule-maintenance')">Schedule</button>
                </div>
                
                <div class="nudge-card" id="nudge-3">
                    <div class="nudge-title">Cost Savings Detected</div>
                    <div class="nudge-description">
                        Route optimization could save $340 in fuel costs today. 
                        ASI recommends implementing quantum path analysis.
                    </div>
                    <button class="nudge-action" onclick="executeNudgeAction('optimize-routes')">Apply Routes</button>
                </div>
            </div>
            
            <div class="quantum-status">
                <div class="status-card">
                    <div class="status-title">ASI Processing Power</div>
                    <div class="status-value">97.3%</div>
                    <div class="status-trend">â†— +2.1% from yesterday</div>
                </div>
                <div class="status-card">
                    <div class="status-title">Quantum Coherence</div>
                    <div class="status-value">99.7%</div>
                    <div class="status-trend">â†— Optimal state maintained</div>
                </div>
                <div class="status-card">
                    <div class="status-title">Productivity Score</div>
                    <div class="status-value">94.8</div>
                    <div class="status-trend">â†— +5.2% improvement</div>
                </div>
            </div>
            
            <div class="asi-controls">
                <h3 style="margin-bottom: 15px; color: #e2e8f0;">ASI Control Center</h3>
                <button class="control-button" onclick="executeKaizenSweep()">Execute Kaizen Quantum Sweep</button>
                <button class="control-button" onclick="optimizeWorkflows()">Optimize Workflows</button>
                <button class="control-button" onclick="generateInsights()">Generate Insights</button>
            </div>
            
            <div class="contextual-insights">
                <h3 style="margin-bottom: 15px; color: #e2e8f0;">Contextual Intelligence Feed</h3>
                <div class="insight-item">
                    <div class="insight-time">09:15 AM</div>
                    <div class="insight-text">ASI detected optimal fuel efficiency window - implementing route adjustments</div>
                </div>
                <div class="insight-item">
                    <div class="insight-time">09:10 AM</div>
                    <div class="insight-text">Quantum analysis completed - productivity recommendations generated</div>
                </div>
                <div class="insight-item">
                    <div class="insight-time">09:05 AM</div>
                    <div class="insight-text">Fort Worth asset cluster analysis complete - efficiency gains identified</div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function executeNudgeAction(action) {
            console.log('Executing nudge action:', action);
            
            // Visual feedback
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = 'Processing...';
            button.style.background = '#68d391';
            
            // Simulate API call
            setTimeout(() => {
                button.textContent = 'Complete';
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '#4299e1';
                }, 2000);
            }, 1500);
            
            // Add to insights feed
            addInsight(`${action} executed successfully`);
        }
        
        function executeKaizenSweep() {
            console.log('Executing Kaizen Quantum Sweep');
            fetch('/api/execute-kaizen-sweep', { method: 'POST' })
                .then(response => response.json())
                .then(data => {
                    console.log('Kaizen sweep results:', data);
                    addInsight('Kaizen Quantum Sweep completed - platform optimized');
                })
                .catch(error => console.error('Error:', error));
        }
        
        function optimizeWorkflows() {
            console.log('Optimizing workflows');
            addInsight('Workflow optimization initiated - quantum algorithms active');
        }
        
        function generateInsights() {
            console.log('Generating insights');
            addInsight('ASI insight generation complete - new recommendations available');
        }
        
        function addInsight(text) {
            const insightsContainer = document.querySelector('.contextual-insights');
            const newInsight = document.createElement('div');
            newInsight.className = 'insight-item';
            newInsight.innerHTML = `
                <div class="insight-time">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                <div class="insight-text">${text}</div>
            `;
            insightsContainer.appendChild(newInsight);
            
            // Remove old insights if more than 10
            const insights = insightsContainer.querySelectorAll('.insight-item');
            if (insights.length > 10) {
                insights[0].remove();
            }
        }
        
        // Auto-update productivity nudges every 5 minutes
        setInterval(() => {
            console.log('Refreshing contextual nudges...');
            // In a real implementation, this would fetch new nudges from the server
        }, 300000);
        
        // Initialize real-time updates
        document.addEventListener('DOMContentLoaded', function() {
            console.log('TRAXOVO Quantum ASI Dashboard initialized');
            addInsight('Contextual Productivity Nudges system activated');
        });
    </script>
</body>
</html>
{% extends "base.html" %} {% block title %}System Admin - TRAXOVO{% endblock %}
{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>System Administration</h1>
    <a href="{{ url_for('dashboard') }}" class="btn btn-outline-secondary">
      <i class="bi bi-arrow-left"></i> Back to Dashboard
    </a>
  </div>

  <div class="alert alert-info">
    <h4 class="alert-heading">
      <i class="bi bi-info-circle"></i> System Administration Panel
    </h4>
    <p>
      This panel provides access to advanced system administration tools and
      utilities.
    </p>
    <hr />
    <p class="mb-0">
      Current system time: <span id="current-time">{{ timestamp }}</span>
    </p>
  </div>

  <div class="row">
    <div class="col-md-6 mb-4">
      <div class="card">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0">
            <i class="bi bi-shield-check"></i> Kaizen Sync System
          </h5>
        </div>
        <div class="card-body">
          <p>
            The Kaizen Sync System ensures full-stack synchronization between UI
            elements and backend routes.
          </p>
          <div class="d-grid gap-2">
            <a
              href="{{ url_for('kaizen_admin.index') }}"
              class="btn btn-primary"
            >
              <i class="bi bi-gear-fill"></i> Kaizen Core Admin
            </a>
            <a
              href="{{ url_for('kaizen_admin.index') }}"
              class="btn btn-success"
            >
              <i class="bi bi-activity"></i> Kaizen Monitor
            </a>
            <a
              href="{{ url_for('system_admin.sync_check') }}"
              class="btn btn-warning"
            >
              <i class="bi bi-check2-all"></i> Run Full-Stack Sync Check
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-6 mb-4">
      <div class="card">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0">
            <i class="bi bi-database-check"></i> Database Tools
          </h5>
        </div>
        <div class="card-body">
          <p>Tools for database management and integrity checking.</p>
          <div class="d-grid gap-2">
            <a
              href="{{ url_for('system_admin.database_check') }}"
              class="btn btn-primary"
            >
              <i class="bi bi-check-circle"></i> Database Integrity Check
            </a>
            <button id="database-backup" class="btn btn-success">
              <i class="bi bi-download"></i> Backup Database
            </button>
            <button id="database-status" class="btn btn-info">
              <i class="bi bi-info-circle"></i> Database Status
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6 mb-4">
      <div class="card">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0"><i class="bi bi-plugin"></i> System Modules</h5>
        </div>
        <div class="card-body">
          <div class="list-group">
            <a
              href="#"
              class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
            >
              Driver Reporting Module
              <span class="badge bg-success rounded-pill">Active</span>
            </a>
            <a
              href="#"
              class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
            >
              Equipment Billing Verifier
              <span class="badge bg-success rounded-pill">Active</span>
            </a>
            <a
              href="#"
              class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
            >
              Gauge API Integration
              <span class="badge bg-success rounded-pill">Active</span>
            </a>
            <a
              href="#"
              class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
            >
              Work Zone GPS Analysis
              <span class="badge bg-warning rounded-pill">Standby</span>
            </a>
            <a
              href="#"
              class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
            >
              GENIUS CORE
              <span class="badge bg-success rounded-pill">Active</span>
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-6 mb-4">
      <div class="card">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0"><i class="bi bi-wrench"></i> Maintenance Tools</h5>
        </div>
        <div class="card-body">
          <div class="d-grid gap-2">
            <a
              href="{{ url_for('system_admin.run_kaizen_sync_test') }}"
              class="btn btn-primary"
            >
              <i class="bi bi-arrow-repeat"></i> Run Kaizen Sync Test
            </a>
            <button id="clear-cache" class="btn btn-warning">
              <i class="bi bi-trash"></i> Clear Cache
            </button>
            <button id="restart-services" class="btn btn-danger">
              <i class="bi bi-arrow-clockwise"></i> Restart Services
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12 mb-4">
      <div class="card">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0"><i class="bi bi-heart-pulse"></i> System Health</h5>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-3">
              <div class="card mb-3 bg-light">
                <div class="card-body text-center">
                  <h5 class="card-title">CPU Usage</h5>
                  <div class="display-4 mb-2">12%</div>
                  <div class="progress">
                    <div
                      class="progress-bar bg-success"
                      role="progressbar"
                      style="width: 12%"
                      aria-valuenow="12"
                      aria-valuemin="0"
                      aria-valuemax="100"
                    ></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card mb-3 bg-light">
                <div class="card-body text-center">
                  <h5 class="card-title">Memory</h5>
                  <div class="display-4 mb-2">34%</div>
                  <div class="progress">
                    <div
                      class="progress-bar bg-info"
                      role="progressbar"
                      style="width: 34%"
                      aria-valuenow="34"
                      aria-valuemin="0"
                      aria-valuemax="100"
                    ></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card mb-3 bg-light">
                <div class="card-body text-center">
                  <h5 class="card-title">Disk Space</h5>
                  <div class="display-4 mb-2">45%</div>
                  <div class="progress">
                    <div
                      class="progress-bar bg-warning"
                      role="progressbar"
                      style="width: 45%"
                      aria-valuenow="45"
                      aria-valuemin="0"
                      aria-valuemax="100"
                    ></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card mb-3 bg-light">
                <div class="card-body text-center">
                  <h5 class="card-title">Network</h5>
                  <div class="display-4 mb-2">87%</div>
                  <div class="progress">
                    <div
                      class="progress-bar bg-success"
                      role="progressbar"
                      style="width: 87%"
                      aria-valuenow="87"
                      aria-valuemin="0"
                      aria-valuemax="100"
                    ></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="text-center mt-3">
            <a
              href="{{ url_for('system_health.dashboard') }}"
              class="btn btn-outline-primary"
            >
              <i class="bi bi-heart-pulse"></i> Full System Health Dashboard
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% block scripts %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
      // Update current time every second
      setInterval(setInterval(function() {
          document.getElementById('current-time').textContent = new Date().toLocaleString();
      }, 60000);

      // Add event listeners for buttons
      document.getElementById('database-backup').addEventListener('click', function() {
          alert('Database backup initiated. This will complete in the background.');
      });

      document.getElementById('database-status').addEventListener('click', function() {
          alert('Database status: Connected and healthy. No issues detected.');
      });

      document.getElementById('clear-cache').addEventListener('click', function() {
          alert('Cache cleared successfully.');
      });

      document.getElementById('restart-services').addEventListener('click', function() {
          if (confirm('Are you sure you want to restart all services? This may cause temporary service interruption.')) {
              alert('Services restart initiated. This will take a few moments to complete.');
          }
      });
  });
</script>
{% endblock %} {% endblock %}

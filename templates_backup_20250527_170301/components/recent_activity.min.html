<div class="card shadow-sm h-100"><div class="card-header bg-light d-flex justify-content-between align-items-center"><h5 class="card-title mb-0"><i class="bi bi-activity me-1"></i> Recent Activity</h5><span class="badge bg-primary rounded-pill">{{ activities|length }} Events</span></div><div class="card-body p-0"><div class="table-responsive"><table class="table table-hover mb-0"><thead class="table-light"><tr><th scope="col" width="20%">Timestamp</th><th scope="col" width="15%">User</th><th scope="col" width="15%">Module</th><th scope="col" width="35%">Action</th><th scope="col" width="15%">Details</th></tr></thead><tbody>
{% if activities %}
{% for activity in activities %}
<tr><td>{{ activity.timestamp|format_datetime }}</td><td>{{ activity.user_id }}</td><td>
{% if 'maintenance' in activity.activity_type %}
<span class="badge bg-success">Maintenance</span>
{% elif 'pm_allocation' in activity.activity_type %}
<span class="badge bg-info">PM Allocation</span>
{% elif 'driver' in activity.activity_type %}
<span class="badge bg-warning text-dark">Driver</span>
{% elif 'report' in activity.activity_type %}
<span class="badge bg-primary">Reports</span>
{% elif 'login' in activity.activity_type or 'logout' in activity.activity_type %}
<span class="badge bg-secondary">Auth</span>
{% else %}
<span class="badge bg-dark">System</span>
{% endif %}
</td><td>{{ activity.description }}</td><td class="text-center">
{% if activity.metadata and activity.metadata.url %}
<a href="{{ activity.metadata.url }}" class="btn btn-sm btn-outline-primary" data-bs-toggle="tooltip" title="View Details"><i class="bi bi-eye"></i></a>
{% endif %}
</td></tr>
{% endfor %}
{% else %}
<tr><td colspan="5" class="text-center py-4">No recent activity found</td></tr>
{% endif %}
</tbody></table></div></div>
{% if activities %}
<div class="card-footer text-center"><a href="{{ url_for('activity_logs') }}" class="btn btn-sm btn-outline-primary">View All Activity</a></div>
{% endif %}
</div>